{"version":3,"sources":["../../v1/controllers/createAccount.js"],"names":["CreateAccountController","createAccount","req","res","accountData","body","jwt","verify","token","err","authorizedData","sendStatus","createdAccount","CreateAccountService","json","status","data","patchAccount","accountNumber","params","accountStatus","updatedAccount","deleteAccount"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,IAAMA,uBAAuB,GAAG;AAC9BC,EAAAA,aAD8B,yBAChBC,GADgB,EACXC,GADW,EACN;AACtB,QAAMC,WAAW,GAAGF,GAAG,CAACG,IAAxB,CADsB,CAEtB;;AACAC,6BAAIC,MAAJ,CAAWL,GAAG,CAACM,KAAf,EAAsB,MAAtB,EAA8B,UAACC,GAAD,EAAMC,cAAN,EAAyB;AACrD,UAAID,GAAJ,EAAS;AACPN,QAAAA,GAAG,CAACQ,UAAJ,CAAe,GAAf;AACD,OAFD,MAEO;AACL,YAAMC,cAAc,GAAGC,0BAAqBZ,aAArB,CAAmCG,WAAnC,EAAgDM,cAAhD,CAAvB;;AACA,eAAOP,GAAG,CAACW,IAAJ,CAAS;AACdC,UAAAA,MAAM,EAAE,SADM;AAEdC,UAAAA,IAAI,EAAEJ;AAFQ,SAAT,EAGJG,MAHI,CAGG,GAHH,CAAP;AAID;AACF,KAVD;AAWD,GAf6B;AAgB9B;AACAE,EAAAA,YAjB8B,wBAiBjBf,GAjBiB,EAiBZC,GAjBY,EAiBP;AAAA,QACbe,aADa,GACKhB,GAAG,CAACiB,MADT,CACbD,aADa;AAErB,QAAME,aAAa,GAAGlB,GAAG,CAACG,IAA1B;;AACAC,6BAAIC,MAAJ,CAAWL,GAAG,CAACM,KAAf,EAAsB,MAAtB,EAA8B,UAACC,GAAD,EAAMC,cAAN,EAAyB;AACrD,UAAID,GAAJ,EAAS;AACPN,QAAAA,GAAG,CAACQ,UAAJ,CAAe,GAAf;AACD,OAFD,MAEO;AACL,YAAMU,cAAc,GAAGR,0BAAqBI,YAArB,CAAkCC,aAAlC,EAAiDE,aAAjD,EAAgEV,cAAhE,CAAvB;;AACA,eAAOP,GAAG,CAACW,IAAJ,CAAS;AACdC,UAAAA,MAAM,EAAE,SADM;AAEdC,UAAAA,IAAI,EAAEK;AAFQ,SAAT,EAGJN,MAHI,CAGG,GAHH,CAAP;AAID;AACF,KAVD;AAWD,GA/B6B;AAgC9B;AACAO,EAAAA,aAjC8B,yBAiChBpB,GAjCgB,EAiCXC,GAjCW,EAiCN;AAAA,QACde,aADc,GACIhB,GAAG,CAACiB,MADR,CACdD,aADc;;AAEtBZ,6BAAIC,MAAJ,CAAWL,GAAG,CAACM,KAAf,EAAsB,MAAtB,EAA8B,UAACC,GAAD,EAAMC,cAAN,EAAyB;AACrD,UAAID,GAAJ,EAAS;AACPN,QAAAA,GAAG,CAACQ,UAAJ,CAAe,GAAf;AACD,OAFD,MAEO;AACL,YAAMW,aAAa,GAAGT,0BAAqBS,aAArB,CAAmCJ,aAAnC,EAAkDR,cAAlD,CAAtB;;AACA,eAAOP,GAAG,CAACW,IAAJ,CAAS;AACdC,UAAAA,MAAM,EAAE,SADM;AAEdC,UAAAA,IAAI,EAAEM;AAFQ,SAAT,EAGJP,MAHI,CAGG,GAHH,CAAP;AAID;AACF,KAVD;AAWD;AA9C6B,CAAhC;eAiDef,uB","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport CreateAccountService from '../services/createAccount';\r\n\r\nconst CreateAccountController = {\r\n  createAccount(req, res) {\r\n    const accountData = req.body;\r\n    // verify jwt token\r\n    jwt.verify(req.token, '5634', (err, authorizedData) => {\r\n      if (err) {\r\n        res.sendStatus(403);\r\n      } else {\r\n        const createdAccount = CreateAccountService.createAccount(accountData, authorizedData);\r\n        return res.json({\r\n          status: 'success',\r\n          data: createdAccount,\r\n        }).status(201);\r\n      }\r\n    });\r\n  },\r\n  // patchAccount\r\n  patchAccount(req, res) {\r\n    const { accountNumber } = req.params;\r\n    const accountStatus = req.body;\r\n    jwt.verify(req.token, '5634', (err, authorizedData) => {\r\n      if (err) {\r\n        res.sendStatus(403);\r\n      } else {\r\n        const updatedAccount = CreateAccountService.patchAccount(accountNumber, accountStatus, authorizedData);\r\n        return res.json({\r\n          status: 'success',\r\n          data: updatedAccount,\r\n        }).status(201);\r\n      }\r\n    });\r\n  },\r\n  // deleteAccount\r\n  deleteAccount(req, res) {\r\n    const { accountNumber } = req.params;\r\n    jwt.verify(req.token, '5634', (err, authorizedData) => {\r\n      if (err) {\r\n        res.sendStatus(403);\r\n      } else {\r\n        const deleteAccount = CreateAccountService.deleteAccount(accountNumber, authorizedData);\r\n        return res.json({\r\n          status: 'success',\r\n          data: deleteAccount,\r\n        }).status(200);\r\n      }\r\n    });\r\n  },\r\n};\r\n\r\nexport default CreateAccountController;\r\n"],"file":"createAccount.js"}