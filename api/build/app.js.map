{"version":3,"sources":["../v1/app.js"],"names":["app","PORT","process","env","use","bodyParser","json","urlencoded","extended","get","req","res","send","checkToken","next","header","headers","authorization","bearer","split","token","sendStatus","RegisterRoute","LoginRoute","CreateStaffRoute","CreateAccountRoute","TransactionRoute","UsersRoute","listen"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AACA,IAAMA,GAAG,GAAG,0BAAZ;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AAEAD,GAAG,CAACI,GAAJ,CAAQC,uBAAWC,IAAX,EAAR;AACAN,GAAG,CAACI,GAAJ,CAAQC,uBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR,E,CAEA;;AACAR,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS,sBAAT;AACD,CAFD;;AAIA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACH,GAAD,EAAMC,GAAN,EAAWG,IAAX,EAAoB;AACrC,MAAMC,MAAM,GAAGL,GAAG,CAACM,OAAJ,CAAYC,aAA3B;;AAEA,MAAI,OAAOF,MAAP,KAAkB,WAAtB,EAAmC;AACjC,QAAMG,MAAM,GAAGH,MAAM,CAACI,KAAP,CAAa,GAAb,CAAf;AACA,QAAMC,KAAK,GAAGF,MAAM,CAAC,CAAD,CAApB;AACAR,IAAAA,GAAG,CAACU,KAAJ,GAAYA,KAAZ;AACAN,IAAAA,IAAI;AACL,GALD,MAKO;AACL;AACAH,IAAAA,GAAG,CAACU,UAAJ,CAAe,GAAf;AACD;AACF,CAZD,C,CAcA;;;AACArB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BkB,oBAA5B;AACAtB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BmB,iBAA5B;AACAvB,GAAG,CAACI,GAAJ,CAAQ,oBAAR,EAA8BS,UAA9B,EAA0CW,wBAA1C;AACAxB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BS,UAA5B,EAAwCY,yBAAxC;AACAzB,GAAG,CAACI,GAAJ,CAAQ,sBAAR,EAAgCS,UAAhC,EAA4Ca,uBAA5C;AACA1B,GAAG,CAACI,GAAJ,CAAQ,eAAR,EAAyBS,UAAzB,EAAqCc,iBAArC,E,CAEA;;AACA3B,GAAG,CAAC4B,MAAJ,CAAW3B,IAAX,EAAiB,YAAM;AACrB,yBAAM,QAAN,oCAA2CA,IAA3C;AACD,CAFD;eAIeD,G","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport debug from 'debug';\nimport RegisterRoute from './routes/register';\nimport CreateStaffRoute from './routes/createStaffs';\nimport LoginRoute from './routes/login';\nimport CreateAccountRoute from './routes/createAccount';\nimport TransactionRoute from './routes/transaction';\nimport UsersRoute from './routes/users';\n\n// instantiate expressjs\nconst app = express();\nconst PORT = process.env.PORT || 5100;\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n\n// Index Route\napp.get('/', (req, res) => {\n  res.send('welcome to Banka API');\n});\n\nconst checkToken = (req, res, next) => {\n  const header = req.headers.authorization;\n\n  if (typeof header !== 'undefined') {\n    const bearer = header.split(' ');\n    const token = bearer[1];\n    req.token = token;\n    next();\n  } else {\n    // If header is undefined return Forbidden (403)\n    res.sendStatus(403);\n  }\n};\n\n// creating the api version route\napp.use('/api/auth/signup', RegisterRoute);\napp.use('/api/auth/signin', LoginRoute);\napp.use('/api/auth/addstaff', checkToken, CreateStaffRoute);\napp.use('/api/v1/accounts', checkToken, CreateAccountRoute);\napp.use('/api/v1/transactions', checkToken, TransactionRoute);\napp.use('/api/v1/users', checkToken, UsersRoute);\n\n// listening to our port\napp.listen(PORT, () => {\n  debug('server')(`server running on port: ${PORT}`);\n});\n\nexport default app;\n"],"file":"app.js"}