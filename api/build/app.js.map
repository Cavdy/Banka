{"version":3,"sources":["../v1/app.js"],"names":["app","PORT","process","env","use","bodyParser","json","urlencoded","extended","swaggerUi","serve","setup","swaggerDocument","req","res","next","header","get","send","checkToken","headers","authorization","bearer","split","token","sendStatus","RegisterRoute","LoginRoute","CreateStaffRoute","CreateAccountRoute","TransactionRoute","UsersRoute","listen"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AACA,IAAMA,GAAG,GAAG,0BAAZ;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AAEAD,GAAG,CAACI,GAAJ,CAAQ,uBAAR;AAEAJ,GAAG,CAACI,GAAJ,CAAQC,uBAAWC,IAAX,EAAR;AACAN,GAAG,CAACI,GAAJ,CAAQC,uBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR,E,CAEA;;AACAR,GAAG,CAACI,GAAJ,CAAQ,WAAR,EAAqBK,6BAAUC,KAA/B,EAAsCD,6BAAUE,KAAV,CAAgBC,mBAAhB,CAAtC;AACAZ,GAAG,CAACI,GAAJ,CAAQ,UAACS,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,gDAA3C;AACAD,EAAAA,IAAI;AACL,CAJD,E,CAMA;;AACAf,GAAG,CAACiB,GAAJ,CAAQ,GAAR,EAAa,UAACJ,GAAD,EAAMC,GAAN,EAAc;AACzBA,EAAAA,GAAG,CAACI,IAAJ,CAAS,sBAAT;AACD,CAFD;;AAIA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACN,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACrC,MAAMC,MAAM,GAAGH,GAAG,CAACO,OAAJ,CAAYC,aAA3B;;AACA,MAAI,OAAOL,MAAP,KAAkB,WAAtB,EAAmC;AACjC,QAAMM,MAAM,GAAGN,MAAM,CAACO,KAAP,CAAa,GAAb,CAAf;AACA,QAAMC,KAAK,GAAGF,MAAM,CAAC,CAAD,CAApB;AACAT,IAAAA,GAAG,CAACW,KAAJ,GAAYA,KAAZ;AACAT,IAAAA,IAAI;AACL,GALD,MAKO;AACL;AACAD,IAAAA,GAAG,CAACW,UAAJ,CAAe,GAAf;AACD;AACF,CAXD,C,CAaA;;;AACAzB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BsB,oBAA5B;AACA1B,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BuB,iBAA5B;AACA3B,GAAG,CAACI,GAAJ,CAAQ,oBAAR,EAA8Be,UAA9B,EAA0CS,wBAA1C;AACA5B,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4Be,UAA5B,EAAwCU,yBAAxC;AACA7B,GAAG,CAACI,GAAJ,CAAQ,sBAAR,EAAgCe,UAAhC,EAA4CW,uBAA5C;AACA9B,GAAG,CAACI,GAAJ,CAAQ,eAAR,EAAyBe,UAAzB,EAAqCY,iBAArC,E,CAEA;;AACA/B,GAAG,CAACgC,MAAJ,CAAW/B,IAAX,EAAiB,YAAM;AACrB,yBAAM,QAAN,oCAA2CA,IAA3C;AACD,CAFD;eAIeD,G","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport debug from 'debug';\nimport swaggerUi from 'swagger-ui-express';\nimport swaggerDocument from '../swagger';\nimport RegisterRoute from './routes/register';\nimport CreateStaffRoute from './routes/createStaffs';\nimport LoginRoute from './routes/login';\nimport CreateAccountRoute from './routes/createAccount';\nimport TransactionRoute from './routes/transaction';\nimport UsersRoute from './routes/users';\n\n// instantiate expressjs\nconst app = express();\nconst PORT = process.env.PORT || 5900;\n\napp.use(cors());\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n\n// swagger\napp.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument));\napp.use((req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n  next();\n});\n\n// Index Route\napp.get('/', (req, res) => {\n  res.send('welcome to Banka API');\n});\n\nconst checkToken = (req, res, next) => {\n  const header = req.headers.authorization;\n  if (typeof header !== 'undefined') {\n    const bearer = header.split(' ');\n    const token = bearer[1];\n    req.token = token;\n    next();\n  } else {\n    // If header is undefined return Forbidden (403)\n    res.sendStatus(403);\n  }\n};\n\n// creating the api version route\napp.use('/api/auth/signup', RegisterRoute);\napp.use('/api/auth/signin', LoginRoute);\napp.use('/api/auth/addstaff', checkToken, CreateStaffRoute);\napp.use('/api/v1/accounts', checkToken, CreateAccountRoute);\napp.use('/api/v1/transactions', checkToken, TransactionRoute);\napp.use('/api/v1/users', checkToken, UsersRoute);\n\n// listening to our port\napp.listen(PORT, () => {\n  debug('server')(`server running on port: ${PORT}`);\n});\n\nexport default app;\n"],"file":"app.js"}