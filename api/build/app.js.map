{"version":3,"sources":["../v1/app.js"],"names":["app","PORT","process","env","use","bodyParser","json","urlencoded","extended","get","req","res","send","checkToken","next","header","headers","authorization","bearer","split","token","sendStatus","RegisterRoute","LoginRoute","CreateAccountRoute","TransactionRoute","listen","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AACA,IAAMA,GAAG,GAAG,0BAAZ;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AAEAD,GAAG,CAACI,GAAJ,CAAQC,uBAAWC,IAAX,EAAR;AACAN,GAAG,CAACI,GAAJ,CAAQC,uBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR,E,CAEA;;AACAR,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS,sBAAT;AACD,CAFD;;AAIA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACH,GAAD,EAAMC,GAAN,EAAWG,IAAX,EAAoB;AACrC,MAAMC,MAAM,GAAGL,GAAG,CAACM,OAAJ,CAAYC,aAA3B;;AAEA,MAAI,OAAOF,MAAP,KAAkB,WAAtB,EAAmC;AACjC,QAAMG,MAAM,GAAGH,MAAM,CAACI,KAAP,CAAa,GAAb,CAAf;AACA,QAAMC,KAAK,GAAGF,MAAM,CAAC,CAAD,CAApB;AACAR,IAAAA,GAAG,CAACU,KAAJ,GAAYA,KAAZ;AACAN,IAAAA,IAAI;AACL,GALD,MAKO;AACL;AACAH,IAAAA,GAAG,CAACU,UAAJ,CAAe,GAAf;AACD;AACF,CAZD,C,CAcA;;;AACArB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BkB,oBAA5B;AACAtB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BmB,iBAA5B;AACAvB,GAAG,CAACI,GAAJ,CAAQ,kBAAR,EAA4BS,UAA5B,EAAwCW,yBAAxC;AACAxB,GAAG,CAACI,GAAJ,CAAQ,sBAAR,EAAgCS,UAAhC,EAA4CY,uBAA5C,E,CAEA;;AACAzB,GAAG,CAAC0B,MAAJ,CAAWzB,IAAX,EAAiB,YAAM;AACrB0B,EAAAA,OAAO,CAACC,GAAR,mCAAuC3B,IAAvC;AACD,CAFD;eAIeD,G","sourcesContent":["import express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport RegisterRoute from './routes/register';\r\nimport LoginRoute from './routes/login';\r\nimport CreateAccountRoute from './routes/createAccount';\r\nimport TransactionRoute from './routes/transaction';\r\n\r\n// instantiate expressjs\r\nconst app = express();\r\nconst PORT = process.env.PORT || 5100;\r\n\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\n\r\n// Index Route\r\napp.get('/', (req, res) => {\r\n  res.send('welcome to Banka API');\r\n});\r\n\r\nconst checkToken = (req, res, next) => {\r\n  const header = req.headers.authorization;\r\n\r\n  if (typeof header !== 'undefined') {\r\n    const bearer = header.split(' ');\r\n    const token = bearer[1];\r\n    req.token = token;\r\n    next();\r\n  } else {\r\n    // If header is undefined return Forbidden (403)\r\n    res.sendStatus(403);\r\n  }\r\n};\r\n\r\n// creating the api version route\r\napp.use('/api/auth/signup', RegisterRoute);\r\napp.use('/api/auth/signin', LoginRoute);\r\napp.use('/api/v1/accounts', checkToken, CreateAccountRoute);\r\napp.use('/api/v1/transactions', checkToken, TransactionRoute);\r\n\r\n// listening to our port\r\napp.listen(PORT, () => {\r\n  console.log(`server running on port: ${PORT}`);\r\n});\r\n\r\nexport default app;\r\n"],"file":"app.js"}